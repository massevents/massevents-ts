import { Channel } from '@storybook/addons';
import { AnyFramework, StoryId, ProjectAnnotations, Args, Globals } from '@storybook/csf';
import { ModuleImportFn, Selection, Story, RenderContext, StoryStore, StorySpecifier, StoryIndex } from '@storybook/store';
import { WebProjectAnnotations } from './types';
import { UrlStore } from './UrlStore';
import { WebView } from './WebView';
import { StoryIndexClient } from './StoryIndexClient';
export declare type RenderPhase = 'loading' | 'rendering' | 'playing' | 'completed' | 'aborted' | 'errored';
declare type MaybePromise<T> = Promise<T> | T;
declare type StoryCleanupFn = () => MaybePromise<void>;
export declare class PreviewWeb<TFramework extends AnyFramework> {
    channel: Channel;
    urlStore: UrlStore;
    indexClient?: StoryIndexClient;
    storyStore: StoryStore<TFramework>;
    view: WebView;
    renderToDOM: WebProjectAnnotations<TFramework>['renderToDOM'];
    previousSelection: Selection;
    previousStory: Story<TFramework>;
    previousCleanup: StoryCleanupFn;
    constructor();
    initialize({ getStoryIndex, importFn, getProjectAnnotations, }: {
        getStoryIndex?: () => StoryIndex;
        importFn: ModuleImportFn;
        getProjectAnnotations: () => WebProjectAnnotations<TFramework>;
    }): MaybePromise<void>;
    getProjectAnnotationsOrRenderError(getProjectAnnotations: () => WebProjectAnnotations<TFramework>): ProjectAnnotations<TFramework> | undefined;
    setupListeners(): void;
    setGlobalsAndRenderSelection(): Promise<void>;
    selectSpecifiedStory(): Promise<void>;
    onKeydown(event: KeyboardEvent): void;
    onSetCurrentStory(selection: Selection): void;
    onUpdateGlobals({ globals }: {
        globals: Globals;
    }): void;
    onUpdateArgs({ storyId, updatedArgs }: {
        storyId: StoryId;
        updatedArgs: Args;
    }): void;
    onResetArgs({ storyId, argNames }: {
        storyId: string;
        argNames?: string[];
    }): Promise<void>;
    onStoryIndexChanged(): Promise<void>;
    onStoriesChanged({ importFn, storyIndex, }: {
        importFn?: ModuleImportFn;
        storyIndex?: StoryIndex;
    }): Promise<void>;
    onGetProjectAnnotationsChanged({ getProjectAnnotations, }: {
        getProjectAnnotations: () => ProjectAnnotations<TFramework>;
    }): void;
    renderSelection({ persistedArgs }?: {
        persistedArgs?: Args;
    }): Promise<void>;
    renderDocs({ story }: {
        story: Story<TFramework>;
    }): Promise<() => Promise<void>>;
    renderStory({ story }: {
        story: Story<TFramework>;
    }): StoryCleanupFn;
    renderStoryToElement({ story, renderContext: renderContextWithoutStoryContext, element, }: {
        story: Story<TFramework>;
        renderContext: Pick<RenderContext<TFramework>, Exclude<keyof RenderContext<TFramework>, 'storyContext' | 'storyFn' | 'unboundStoryFn' | 'forceRemount'>>;
        element: HTMLElement;
    }): StoryCleanupFn;
    cleanupPreviousRender({ unmountDocs }?: {
        unmountDocs?: boolean;
    }): Promise<void>;
    renderPreviewEntryError(err: Error): void;
    renderMissingStory(storySpecifier?: StorySpecifier): Promise<void>;
    renderException(storyId: StoryId, error: Error): void;
    renderError(storyId: StoryId, { title, description }: {
        title: string;
        description: string;
    }): void;
}
export {};
